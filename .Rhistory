library(tigris)
#library(tidycensus)
#library(purrr)
library(tidyverse)
#library(stringr)
library(dplyr)
library(sf)
options(class = "sf")
library(maptools)
library(rgdal)    # for readOGR and others
library(leaflet)  # for interactive maps (NOT leafletR here)
library(maptools)
install.packages("leaflet")
t_blocks <- read.csv("tacoma_blocks2.csv")
t_tracts <- read.csv("tacoma_tracts2.csv")
t_od <- read.csv("od2015_Tacoma.csv")
t_od <- read.csv("od2015_Tacoma.csv")
t_od$h_geocode <- substr(as.character(t_od$h_geocode),
start = 1,
stop = nchar(as.character(t_od$h_geocode)) - 4)
t_od <- read.csv("od2015_Tacoma.csv")
t_od$h_geocode <- substr(as.character(t_od$h_geocode),
start = 1,
stop = nchar(as.character(t_od$h_geocode)) - 4)
t_rac <- read.csv("rac2015_Tacoma.csv")
t_rac <- read.csv("rac2015_Tacoma.csv")
t_wac <- read.csv("wac2015_Tacoma.csv")
t_od$h_geocode <- substr(as.character(t_od$h_geocode),
start = 1,
stop = nchar(as.character(t_od$h_geocode)) - 4)
t_rac <- read.csv("rac2015_Tacoma.csv")
t_wac <- read.csv("wac2015_Tacoma.csv")
t_blocks$h_geocode <- t_blocks$GEOID10
t_rac <- read.csv("rac2015_Tacoma.csv")
t_wac <- read.csv("wac2015_Tacoma.csv")
t_blocks$h_geocode <- t_blocks$GEOID10
t_blocks$h_geocode <- substr(as.character(t_blocks$h_geocode),
start = 1,
stop = nchar(as.character(t_blocks$h_geocode)) - 4)
t_tracts$h_geocode <- t_tracts$GEOID.1
t_rac$h_geocode <- t_rac$ht
t_rac$h_geocode <- substr(as.character(t_rac$h_geocode),
start = 1,
stop = nchar(as.character(t_rac$h_geocode)) - 4)
residental_blocks <- merge(t_blocks, t_rac, by = "h_geocode")
od_blocks <- merge(t_blocks, t_od, by = "h_geocode")
od_tracts <- merge(t_tracts, t_od, by = "h_geocode")
setwd("~/Geog458new/Lab2/Group-Lab-2-Destination-Data")
getwd()
t_blocks <- read.csv("tacoma_blocks2.csv")
t_tracts <- read.csv("tacoma_tracts2.csv")
t_od <- read.csv("od2015_Tacoma.csv")
t_od$h_geocode <- substr(as.character(t_od$h_geocode),
start = 1,
stop = nchar(as.character(t_od$h_geocode)) - 4)
t_rac <- read.csv("rac2015_Tacoma.csv")
t_wac <- read.csv("wac2015_Tacoma.csv")
t_blocks$h_geocode <- t_blocks$GEOID10
t_blocks$h_geocode <- substr(as.character(t_blocks$h_geocode),
start = 1,
stop = nchar(as.character(t_blocks$h_geocode)) - 4)
t_tracts$h_geocode <- t_tracts$GEOID.1
t_rac$h_geocode <- t_rac$ht
t_rac$h_geocode <- substr(as.character(t_rac$h_geocode),
start = 1,
stop = nchar(as.character(t_rac$h_geocode)) - 4)
residental_blocks <- merge(t_blocks, t_rac, by = "h_geocode")
od_blocks <- merge(t_blocks, t_od, by = "h_geocode")
od_blocks <- merge(t_blocks, t_od, by = "h_geocode")
od_tracts <- merge(t_tracts, t_od, by = "h_geocode")
moransI <- moran.test(od_blocks$SE03, od_blocks$SI02)
library(spdep)
moransI <- moran.test(od_blocks$SE03, od_blocks$SI02)
View(od_blocks)
od_blocks$SE03 <- as.numeric(od_blocks$SI03)
od_blocks$SI02 <- as.numeric(od_blocks$SI02)
moransI <- moran.test(od_blocks$SE03, od_blocks$SI02)
od_blocks$SE03 <- as.double(od_blocks$SI03)
od_blocks$SI02 <- as.double(od_blocks$SI02)
moransI <- moran.test(od_blocks$SE03, od_blocks$SI02)
moransI <- moran.test(od_blocks$SE03, od_blocks$geometry)
st_write(obj = tacoma_blocks, dsn = "tacomablocks.sf")
library(tigris)
#library(tidycensus)
#library(purrr)
library(tidyverse)
#library(stringr)
library(dplyr)
library(sf)
#library(rgeos)
#library(rgdal)
#library(sp)
options(class = "sf")
options(tigris_use_cache = TRUE)
tacoma <- st_as_sf(places("Washington", year = 2017) %>% filter_place("Tacoma"))
tacoma_plot <- places("Washington", year = 2017) %>% filter_place("Tacoma")
pierce_tracts <- st_as_sf(tracts(state = "WA", county = "Pierce", year = "2017", cb = TRUE))
pierce_blocks <- st_as_sf(blocks(state = "WA", county = "Pierce", year = "2017"))
pierce_water_blocks <- pierce_blocks %>%
filter(ALAND10 == "0")
tacoma_water_blocks <- st_intersection(tacoma, pierce_water_blocks)
pierce_water_tracts <- pierce_tracts %>%
filter(ALAND == "0")
tacoma_water_tracts <- st_intersection(tacoma, pierce_water_tracts)
plot(tacoma_water_blocks)
plot(tacoma_water_tracts)
tacoma_blocks <- st_intersection(tacoma, pierce_blocks)
tacoma_tracts <- st_intersection(tacoma, pierce_tracts)
plot(tacoma_tracts)
write_csv(tacoma_blocks,"tacoma_blocks2.csv")
write_csv(tacoma_tracts, "tacoma_tracts2.csv")
st_write(obj = tacoma_blocks, dsn = "tacomablocks.sf")
st_write(obj = tacoma_tracts, dsn = "tacomatracts.sf")
st_write(obj = tacoma_tracts, dsn = "tacomatracts.gpkg")
st_write(obj = tacoma_blocks, dsn = "tacomablocks.gpkg")
options(sf_max.plot = "GEOID")
plot(tacoma_blocks)
plot(tacoma_tracts)
plot(tacoma)
tacoma <- st_as_sf(places("Washington", year = 2017) %>% filter_place("Tacoma"))
plot(tacoma_water_blocks)
pierce_water_blocks <- pierce_blocks %>%
filter(ALAND10 == "0")
tacoma_water_blocks <- st_intersection(tacoma, pierce_water_blocks)
pierce_water_tracts <- pierce_tracts %>%
filter(ALAND == "0")
tacoma_water_tracts <- st_intersection(tacoma, pierce_water_tracts)
plot(tacoma_water_blocks)
plot(tacoma_water_tracts)
plot(tacoma_blocks)
plot(tacoma_tracts)
plot(tacoma)
tacoma_blocks <- st_intersection(tacoma, pierce_blocks)
tacoma_tracts <- st_intersection(tacoma, pierce_tracts)
plot(tacoma_tracts)
plot(tacoma_tracts)
library(tigris)
library(tidycensus)
library(purrr)
library(tidyverse)
library(stringr)
library(dplyr)
library(sf)
#library(rgeos)
#library(rgdal)
library(sp)
options(class = "sf")
options(tigris_use_cache = TRUE)
tacoma <- st_as_sf(places("Washington", year = 2017) %>% filter_place("Tacoma"))
pierce_tracts <- st_as_sf(tracts(state = "WA", county = "Pierce", year = "2017", cb = TRUE))
od_blocks <- st_as_sf(merge(t_blocks, t_od, by = "h_geocode"))
t_blocks <- read.csv("tacoma_blocks2.csv")
t_tracts <- read.csv("tacoma_tracts2.csv")
t_od <- read.csv("od2015_Tacoma.csv")
t_od$h_geocode <- substr(as.character(t_od$h_geocode),
start = 1,
stop = nchar(as.character(t_od$h_geocode)) - 4)
t_rac <- read.csv("rac2015_Tacoma.csv")
t_wac <- read.csv("wac2015_Tacoma.csv")
t_blocks$h_geocode <- t_blocks$GEOID10
t_blocks$h_geocode <- substr(as.character(t_blocks$h_geocode),
start = 1,
stop = nchar(as.character(t_blocks$h_geocode)) - 4)
t_tracts$h_geocode <- t_tracts$GEOID.1
t_rac$h_geocode <- t_rac$ht
t_rac$h_geocode <- substr(as.character(t_rac$h_geocode),
start = 1,
stop = nchar(as.character(t_rac$h_geocode)) - 4)
residental_blocks <- merge(t_blocks, t_rac, by = "h_geocode")
od_blocks <- merge(t_blocks, t_od, by = "h_geocode")
od_blocks <- merge(t_blocks, t_od, by = "h_geocode")
od_tracts <- merge(t_tracts, t_od, by = "h_geocode")
od_blocks <- st_as_sf(od_blocks)
st_write(obj = tacoma_blocks, dsn = "tacomablocks.sf")
options(class = "sf")
options(tigris_use_cache = TRUE)
tacoma <- st_as_sf(places("Washington", year = 2017) %>% filter_place("Tacoma"))
pierce_tracts <- st_as_sf(tracts(state = "WA", county = "Pierce", year = "2017", cb = TRUE))
pierce_blocks <- st_as_sf(blocks(state = "WA", county = "Pierce", year = "2017"))
#Gather water shapefiles
pierce_water_blocks <- pierce_blocks %>%
filter(ALAND10 == "0")
#Intersected the data in both the Tacoma and water sf objects.
tacoma_water_blocks <- st_intersection(tacoma, pierce_water_blocks)
#
pierce_water_tracts <- pierce_tracts %>%
filter(ALAND == "0")
tacoma_water_tracts <- st_intersection(tacoma, pierce_water_tracts)
plot(tacoma_water_blocks)
library(tigris)
library(tidycensus)
library(purrr)
library(tidyverse)
library(stringr)
library(dplyr)
library(sf)
library(rgeos)
library(rgdal)
library(sp)
plot(tacoma_water_blocks)
plot(tacoma_water_blocks)
library(ggplot2)
plot(tacoma_water_blocks)
plot(tacoma_water_tracts)
options(class = "sf")
options(tigris_use_cache = TRUE)
plot(tacoma_water_blocks)
plot(tacoma_water_tracts)
plot(tacoma_tracts)
tacoma_blocks <- st_intersection(tacoma, pierce_blocks)
tacoma_tracts <- st_intersection(tacoma, pierce_tracts)
plot(tacoma_tracts)
plot(tacoma)
getwd()
plot(tacoma_tracts)
plot(tacoma)
#Gather place data for Tacoma and make it sf.
tacoma <- places("Washington", year = 2017) %>% filter_place("Tacoma")
#Gather tract data for Pierce County and make it sf.
pierce_tracts <- tracts(state = "WA", county = "Pierce", year = "2017", cb = TRUE)
#Gather block data for Pierce County and make it sf.
pierce_blocks <- blocks(state = "WA", county = "Pierce", year = "2017")
tacoma_blocks <- st_intersection(tacoma, pierce_blocks)
plot(tacoma_tracts)
