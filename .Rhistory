#Gather tract data for Pierce County and make it sf.
pierce_tracts <- st_as_sf(tracts(state = "WA", county = "Pierce", year = "2017", cb = TRUE))
#Gather block data for Pierce County and make it sf.
pierce_blocks <- st_as_sf(blocks(state = "WA", county = "Pierce", year = "2017"))
#Gather tract data for Pierce County and make it sf.
pierce_tracts <- st_as_sf(tracts(state = "WA", county = "Pierce", year = "2017", cb = TRUE))
#Gather block data for Pierce County and make it sf.
pierce_blocks <- st_as_sf(blocks(state = "WA", county = "Pierce", year = "2017"))
#testing plot
plot(tacoma_tracts)
t_blocks <- load(file = "tacomablocks.RData")
t_blocks <- load(file = "tacomablocks.Rda",)
t_blocks <- load(file = "tacomablocks.Rda")
t_blocks <- readRDS(file = "tacomablocks.Rda")
t_blocks <- readRDS(file = "tacomablocks.rda")
t_blocks <- readRDS(file = "tacomablocks.RData")
t_blocks <- load("tacomablocks.RData")
st_write(obj = tacoma_tracts, dsn = "tacomatracts.geosjson")
tacoma_blocks <- st_intersection(tacoma, pierce_blocks)
tacoma_tracts <- st_intersection(tacoma, pierce_tracts)
st_write(obj = tacoma_tracts, dsn = "tacomatracts.geosjson")
st_write(obj = tacoma_tracts, dsn = "tacomatracts.geosjson", driver = "GeoJSON")
st_write(obj = tacoma_blocks, dsn = "tacomablocks.geojson", driver = "GeoJSON")
t_tracts <- st_read("tacomatracts.geojson")
t_tracts <- st_read("tacomatracts.shp")
t_tracts <- read_sf(dsn = ".", layer = "tacomablocks.shp")
t_tracts <- read_sf("tacomablocks.shp")
library(raster)
t_tracts <- shapefile("tacomablocks.shp")
t_tracts <- shapefile("tacomablocks")
t_tracts <- shapefile("tacomablocks-polygon.shp")
t_tracts <- st_read("tacomablocks-polygon.shp")
t_tracts <- read_sf("tacomablocks.shp")
t_tracts <- read_sf("Shapefiles/tacomablocks.shp")
t_tracts <- read_sf("./Shapefiles/tacomablocks.shp")
t_tracts <- read_sf("./Shapefiles/tacomablocks.shp")
t_tracts <- read_sf("/Shapefiles/tacomablocks.shp")
t_tracts <- read_sf("Shapefiles/tacomablocks.shp")
t_tracts <- read_sf("./Shapefiles/tacomablocks.shx")
library(tidyverse)
baseData=read.csv("wa_od_main_JT01_2015.csv")
library(dplyr)
###Create Map 1
# Block Shapefile with WAC
WACB$GEOID10= WACB$w_geocode
ODDATA <- read.csv("od2015_Tacoma.csv")
WACT <- read.csv("wac2015_Tacoma.csv")
WACB <- read.csv("wac2015_Tacoma_Block.csv")
tacomablockshp <- st_read("tacomablocks-polygon.shp")
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(sf)
library(dplyr)
library(tmap)
library(leaflet)
library(ggplot2)
library(shiny)
ODDATA <- read.csv("od2015_Tacoma.csv")
WACT <- read.csv("wac2015_Tacoma.csv")
WACB <- read.csv("wac2015_Tacoma_Block.csv")
tacomablockshp <- st_read("tacomablocks-polygon.shp")
tacomatractshp <- st_read("pie10ct.shp")
Washingtontractshp <- st_read("cb_2017_53_tract_500k.shp")
library(tidyverse)
baseData=read.csv("wa_od_main_JT01_2015.csv")
library(dplyr)
###Create Map 1
# Block Shapefile with WAC
WACB$GEOID10= WACB$w_geocode
WACBLOCK <- merge(tacomablockshp, WACB, by=c("GEOID10"))
#Change label name for plot Block
WACBLOCK$Population = WACBLOCK$CE01
#plot block
BLOCK_MAP <- tm_shape(WACBLOCK) +tm_polygons() +tm_symbols(col="Population") + tm_borders() +tm_layout(title = "Number of jobs with earnings $1250/month or less in the City of Tacoma on a Block Level", title.position = c("RIGHT", "TOP"))
BLOCK_MAP
##Create Map 2
#Number of jobs with earnings $1250/month or less
#plot 2 track
WACTRACT <- merge(tacomatractshp, WACT, by=c("GEOID10"))
WACTRACT <- merge(tacomatractshp, WACT, by=c("GEOID10"))
WACTRACT <- merge(tacomatractshp, WACT, by=c("GEOID10"))
WACTRACT <- merge(tacomatractshp, WACT, by=c("GEOID10"))
View(WACT)
View(tacoma_tracts)
tacomatractshp <- st_read("pie10ct.shp")
WACTRACT <- merge(tacomatractshp, WACT, by=c("GEOID10"))
WACTRACT$Population = WACTRACT$CE01
TRACt_MAP <- tm_shape(WACTRACT) +tm_polygons() +tm_symbols(col="Population") + tm_borders() +tm_layout(title = "Number of jobs with earnings $1250/month or less in the City of Tacoma on a Tract Level", title.position = c("RIGHT", "TOP"))
WACTRACT <- merge(tacomatractshp, WACT, by=c("GEOID10"))
WACT <- read.csv("wac2015_Tacoma.csv")
WACB <- read.csv("wac2015_Tacoma_Block.csv")
tacomablockshp <- st_read("tacomablocks-polygon.shp")
tacomatractshp <- st_read("pie10ct.shp")
Washingtontractshp <- st_read("cb_2017_53_tract_500k.shp")
###Create Map 1
# Block Shapefile with WAC
WACB$GEOID10= WACB$w_geocode
WACBLOCK <- merge(tacomablockshp, WACB, by=c("GEOID10"))
#Change label name for plot Block
WACBLOCK$Population = WACBLOCK$CE01
#plot block
BLOCK_MAP <- tm_shape(WACBLOCK) +tm_polygons() +tm_symbols(col="Population") + tm_borders() +tm_layout(title = "Number of jobs with earnings $1250/month or less in the City of Tacoma on a Block Level", title.position = c("RIGHT", "TOP"))
BLOCK_MAP
BLOCK_MAP
##Create Map 2
#Number of jobs with earnings $1250/month or less
#plot 2 track
WACTRACT <- merge(tacomatractshp, WACT, by=c("GEOID10"))
View(tacomatractshp)
WACT$GEOID10 = WACT$wt
WACTRACT <- merge(tacomatractshp, WACT, by=c("GEOID10"))
WACTRACT$Population = WACTRACT$CE01
TRACt_MAP <- tm_shape(WACTRACT) +tm_polygons() +tm_symbols(col="Population") + tm_borders() +tm_layout(title = "Number of jobs with earnings $1250/month or less in the City of Tacoma on a Tract Level", title.position = c("RIGHT", "TOP"))
TRACT_MAP
TRACT_MAP <- tm_shape(WACTRACT) +tm_polygons() +tm_symbols(col="Population") + tm_borders() +tm_layout(title = "Number of jobs with earnings $1250/month or less in the City of Tacoma on a Tract Level", title.position = c("RIGHT", "TOP"))
TRACT_MAP
BLOCK_MAP
###Create Map of OD
HomeTract1 <-filter(ODDATA, ht == 53053060905)
Washingtontractshp$wt = Washingtontractshp$GEOID
HomeTract1Merge <- merge(Washingtontractshp, HomeTract1, by=c("wt"), all = TRUE)
HomeTract1Merge[is.na(HomeTract1Merge)] <- 0
tm_shape(HomeTract1Merge) +tm_polygons() +  tm_symbols(col="wt") + tm_borders() +tm_layout(title = "Points of places where people who live in area 53053060905 work", title.position = c("RIGHT", "TOP"))
library(sfdep)
library(spdep)
nb <- poly2nb(ODDATA, queen=TRUE)
View(ODDATA)
tm_shape(ODDATA) + tm_polygons(style="quantile", col = "SI03") +
tm_legend(outside = TRUE, text.size = .8)
ODDATA_shp <- st_as_sf(ODDATA)
install.packages("RcolorBrewer")
y
install.packages("RColorBrewer")
getwd()
library(tidyverse)
library(tidyverse)
library(sf)
library(dplyr)
library(tmap)
library(tmap)
library(leaflet)
library(ggplot2)
library(shiny)
library(maptools)
library(RColorBrewer)
library(maptools)
library(RColorBrewer)
names(ODDATA)
high_earnings <- ODDATA$SE03
home_tracts <- ODDATA$ht
LQ <- function(high_earnings, home_tracts) {
sdp<- high_earnings / home_tracts
dp<-  sum(high_earnings)/ sum(home_tracts)
sdp/dp
}
home_tract_LQ <- data.frame(ODDATA$ons_label, LQ(high_earnings, home_tracts))
View(tacomablockshp)
View(wa)
TACOMATRACT <- merge(tacomatractshp, ODDATA, by=c("GEOID10"))
View(WACB)
WACT$GEOID10 = WACT$wt
WACTRACT <- merge(tacomatractshp, WACT, by=c("GEOID10"))
TACOMATRACT <- merge(WACTRACT, ODDATA, by=c("wt"))
View(TACOMATRACT)
TACOMATRACT <- merge(WACTRACT, ODDATA, by=c("wt"))
high_earnings <- TACOMATRACT$SE03
home_tracts <- TACOMATRACT$ht
LQ <- function(high_earnings, home_tracts) {
sdp<- high_earnings / home_tracts
dp<-  sum(high_earnings)/ sum(home_tracts)
sdp/dp
}
home_tracts <- TACOMATRACT$h_geocode
LQ <- function(high_earnings, home_tracts) {
sdp<- high_earnings / home_tracts
dp<-  sum(high_earnings)/ sum(home_tracts)
sdp/dp
}
home_tract_LQ <- data.frame(ODDATA$ons_label, LQ(high_earnings, home_tracts))
home_tract_LQ <- data.frame(TACOMATRACT$ons_label, LQ(high_earnings, home_tracts))
colnames(home_tract_LQ)<- c("ons_label", "bor_LQ")
home_tract_LQ <- data.frame(TACOMATRACT$NAME10, LQ(high_earnings, home_tracts))
colnames(home_tract_LQ) <- c("ons_label", "bor_LQ")
View(WACBLOCK)
TACOMAB <- merge(WACBLOCK, ODDATA, by=c("wt"))
TACOMAB <- merge(WACBLOCK, ODDATA, by=c("GEOID10"))
TACOMAB <- merge(WACBLOCK, ODDATA, by=c("w_geocode"))
high_earnings <- TACOMATRACT$SE03
home_tracts <- TACOMATRACT$h_geocode
LQ <- function(high_earnings, home_tracts) {
sdp<- high_earnings / home_tracts
dp<-  sum(high_earnings)/ sum(home_tracts)
sdp/dp
}
home_tract_LQ <- data.frame(TACOMATRACT$NAME10, LQ(high_earnings, home_tracts))
colnames(home_tract_LQ) <- c("NAME10", "bor_LQ")
View(home_tract_LQ)
brks<-c(0.4, 0.6, 0.8, 1, 1.2, 1.4, 1.6)
colours <- brewer.pal(6, "Blues")
library(RColorBrewer)
colors <- brewer.pal(6, "Blues")
colnames(home_tract_LQ) <- c("NAME10", "home_tract_LQ")
#Color Breaks
brks<-c(0.4, 0.6, 0.8, 1, 1.2, 1.4, 1.6)
colors <- brewer.pal(6, "Blues")
plot(TACOMAB, col=colors[findInterval(home_tract_LQ$home_tract_LQ, brks,
all.inside=TRUE)], axes=F)
plot(TACOMAB, col=colors[findInterval(home_tract_LQ$home_tract_LQ, brks,
all.inside=TRUE)], axes=F)
plot(TACOMAB, col=colors[findInterval(home_tract_LQ$home_tract_LQ, brks)
all.inside=TRUE)], axes=F)
plot(TACOMAB, col=colors[findInterval(home_tract_LQ$home_tract_LQ, brks)
plot(TACOMAB, col=colors[findInterval(home_tract_LQ$home_tract_LQ, brks)])
plot(TACOMAB, col=colors[findInterval(home_tract_LQ$home_tract_LQ, brks)], axes = F)
plot(TACOMAB, col=colors[findInterval(home_tract_LQ$home_tract_LQ, brks,
all.inside=FALSE)], axes=F)
#Color Breaks
brks<- as.numeric(c(0.4, 0.6, 0.8, 1, 1.2, 1.4, 1.6))
colors <- brewer.pal(6, "Blues")
plot(TACOMAB, col=colors[findInterval(home_tract_LQ$home_tract_LQ, brks,
all.inside=TRUE)], axes=F)
plot(TACOMAB, col=colors[findInterval(as.numeric(home_tract_LQ$home_tract_LQ), brks,
all.inside=TRUE)], axes=F)
###
high_earnings <- TACOMATRACT$SE01
home_tracts <- TACOMATRACT$h_geocode
LQ <- function(high_earnings, home_tracts) {
sdp<- high_earnings / home_tracts
dp<-  sum(high_earnings)/ sum(home_tracts)
sdp/dp
}
TACOMATRACT <- merge(WACTRACT, ODDATA, by=c("w_geocode"))
###
high_earnings <- TACOMATRACT$SE01
TACOMATRACT <- merge(WACTRACT, ODDATA, by=c("h_geocode"))
TACOMATRACT <- merge(WACTRACT, ODDATA, by=c("w_geocode"))
TACOMATRACT <- merge(WACTRACT, ODDATA, by=c("wt"))
###
high_earnings <- TACOMATRACT$SE01
home_tracts <- TACOMATRACT$h_geocode
LQ <- function(high_earnings, home_tracts) {
sdp<- high_earnings / home_tracts
dp<-  sum(high_earnings)/ sum(home_tracts)
sdp/dp
}
home
h
home_tracts <- TACOMATRACT$h_geocode
LQ <- function(high_earnings, home_tracts) {
sdp<- high_earnings / home_tracts
dp<-  sum(high_earnings)/ sum(home_tracts)
sdp/dp
}
home_tract_LQ <- data.frame(TACOMATRACT$NAME10, LQ(high_earnings, home_tracts))
###
good_producing <- TACOMATRACT$SE01
home_tracts <- TACOMATRACT$h_geocode
LQ <- function(high_earnings, home_tracts) {
sdp<- high_earnings / home_tracts
dp<-  sum(high_earnings)/ sum(home_tracts)
sdp/dp
}
home_tract_LQ <- data.frame(TACOMATRACT$NAME10, LQ(good_producing, home_tracts))
colnames(home_tract_LQ) <- c("Num_job_GoodsProducing", "home_tract_LQ")
tm_shape(HomeTract1Merge) +tm_polygons() +  tm_symbols(col="home_tract_LQ") + tm_borders() +tm_layout(title = "Location quotient (LQ) of the Goods Producing Industry", title.position = c("RIGHT", "TOP"))
library(tidyverse)
library(tidyverse)
library(sf)
library(dplyr)
library(tmap)
library(leaflet)
library(ggplot2)
library(shiny)
library(maptools)
tm_shape(HomeTract1Merge) +tm_polygons() +  tm_symbols(col="home_tract_LQ") + tm_borders() +tm_layout(title = "Location quotient (LQ) of the Goods Producing Industry", title.position = c("RIGHT", "TOP"))
tm_shape(home_tract_LQ) +tm_polygons() +  tm_symbols(col="home_tract_LQ") + tm_borders() +tm_layout(title = "Location quotient (LQ) of the Goods Producing Industry", title.position = c("RIGHT", "TOP"))
tm_shape(home_tract_LQ) + tm_polygons() +  tm_symbols(col="home_tract_LQ") + tm_borders() +tm_layout(title = "Location quotient (LQ) of the Goods Producing Industry", title.position = c("RIGHT", "TOP"))
ht_LQ <- st_as_sf(home_tract_LQ)
ht_LQ <- st_as_sf(home_tract_LQ, "GEOMETRY = POLYGON")
View(WACTRACT)
View(tacomatractshp)
View(TACOMAB)
Transportion <- TACOMATRACT$SE01
TACOMA
Transportion <- TACOMATRACT$SE01
home_tracts <- TACOMATRACT$h_geocode
LQ <- function(high_earnings, home_tracts) {
sdp<- high_earnings / home_tracts
dp<-  sum(high_earnings)/ sum(home_tracts)
sdp/dp
}
Transportion <- TACOMATRACT$CNS08
home_tracts <- TACOMATRACT$h_geocode
Transportion <- TACOMATRACT$CNS08
home_tracts <- TACOMATRACT$h_geocode
LQ <- function(Transportion, home_tracts) {
sdp<- Transportion / home_tracts
dp<-  sum(Transportion)/ sum(home_tracts)
sdp/dp
}
home_tract_LQ <- data.frame(TACOMATRACT$NAME10, LQ(good_producing, home_tracts))
colnames(home_tract_LQ) <- c("Num_job_GoodsProducing", "home_tract_LQ")
tm_shape(home_tract_LQ) + tm_polygons() +  tm_symbols(col="home_tract_LQ") + tm_borders() +tm_layout(title = "Location quotient (LQ) of the Goods Producing Industry", title.position = c("RIGHT", "TOP"))
WACB$GEOID10= WACB$w_geocode
WACBLOCK <- merge(tacomablockshp, WACB, by=c("GEOID10"))
WACB$GEOID10= WACB$w_geocode
WACBLOCK <- merge(tacomablockshp, WACB, by=c("GEOID10"))
WACB$GEOID10= WACB$w_geocode
WACBLOCK <- merge(tacomablockshp, WACB, by=c("GEOID10"))
WACT$GEOID10 = WACT$wt
WACTRACT <- merge(tacomatractshp, WACT, by=c("GEOID10"))
WACTRACT$GoodsProducing = WACTRACT$CNS08
Transportion <- WACTRACT$GoodsProducing
Transportion <- WACTRACT$Transportion_Warehouse
home_tracts <- TACOMATRACT$h_geocode
LQ <- function(Transportion, home_tracts) {
sdp<- Transportion / home_tracts
dp<-  sum(Transportion)/ sum(home_tracts)
sdp/dp
}
Transportion_warehouse <- WACTRACT$Transportion_Warehouse
home_tracts <- TACOMATRACT$h_geocode
home_tract_LQ <- data.frame(WACTRACT$, LQ(Transportion_warehouse, home_tracts))
colnames(home_tract_LQ) <- st_as_sf(c("Num_job_Transpo_Warehouse", "home_tract_LQ"))
home_tract_LQ <- data.frame(WACTRACT$Industry, LQ(Transportion_warehouse, home_tracts))
colnames(home_tract_LQ) <- st_as_sf(c("Num_job_Transpo_Warehouse", "home_tract_LQ"))
home_tract_LQ <- st_as_sf(data.frame(WACTRACT$Industry, LQ(Transportion_warehouse, home_tracts)))
home_tract_LQ <- data.frame(WACTRACT$Industry, LQ(Transportion_warehouse, home_tracts))
st_as_sf(home_tract_LQ)
home_tract_LQ <- data.frame(WACTRACT$Industry, LQ(Transportion_warehouse, home_tracts))
home_tract_LQ <- data.frame(WACTRACT$CNS08, LQ(Transportion_warehouse, home_tracts))
Transpo_LQ <- LQ(Transportion_warehouse, home_tracts)
WACT$Transp <- LQ(Transportion_warehouse, home_tracts)
WACT <- read.csv("wac2015_Tacoma.csv")
WACT$Transp <- LQ(Transportion_warehouse, home_tracts)
LQ <- function(Transportion, home_tracts) {
sdp<- Transportion / home_tracts
dp<-  sum(Transportion)/ sum(home_tracts)
sdp/dp
}
WACT$Transp <- LQ(Transportion_warehouse, home_tracts)
WACT$Transp <- as.data.frame(LQ(Transportion_warehouse, home_tracts))
WACT$GEOID10 = WACT$wt
WACTRACT$GoodsProducing = WACTRACT$CNS08
Transportion_warehouse <- WACTRACT$Transportion_Warehouse
home_tracts <- TACOMATRACT$h_geocode
LQ <- function(Transportion, home_tracts) {
sdp<- Transportion / home_tracts
dp<-  sum(Transportion)/ sum(home_tracts)
sdp/dp
}
WACT$Transp <- as.data.frame(LQ(Transportion_warehouse, home_tracts))
WACT$Transp <- as.numeric(LQ(Transportion_warehouse, home_tracts))
home_tract_LQ <- data.frame(WACTRACT$ON, LQ(Transportion_warehouse, home_tracts))
home_tract_LQ <- data.frame(WACTRACT$industry, LQ(Transportion_warehouse, home_tracts))
home_tract_LQ <- data.frame(WACTRACT$CNS08, LQ(Transportion_warehouse, home_tracts))
home_tract_LQ <- data.frame(WACTRACT$industry, LQ(Transportion_warehouse, home_tracts))
WACTRACT$Transport_industry_LQ <- home_tract_LQ
View(home_tract_LQ)
home_tract_LQ <- LQ(Transportion_warehouse, home_tracts))
home_tract_LQ <- LQ(Transportion_warehouse, home_tracts)
WACTRACT$Transportion_Warehouse = WACTRACT$CNS08
Transportion_warehouse <- WACTRACT$Transportion_Warehouse
home_tracts <- TACOMATRACT$h_geocode
LQ <- function(Transportion, home_tracts) {
sdp<- Transportion / home_tracts
dp<-  sum(Transportion)/ sum(home_tracts)
sdp/dp
}
home_tract_LQ <- LQ(Transportion_warehouse, home_tracts)
WACTRACT$industry_LQ <-  home_tract_LQ
home_tract_LQ <- data.frame(WACTRACT$Label, LQ(Transportion_warehouse, home_tracts))
WACT$GEOID10 = WACT$wt
WACTRACT <- merge(tacomatractshp, WACT, by=c("GEOID10"))
WACTRACT$Transportion_Warehouse = WACTRACT$CNS08
Transportion_warehouse <- WACTRACT$Transportion_Warehouse
home_tracts <- TACOMATRACT$h_geocode
LQ <- function(Transportion, home_tracts) {
sdp<- Transportion / home_tracts
dp<-  sum(Transportion)/ sum(home_tracts)
sdp/dp
}
home_tract_LQ <- data.frame(WACTRACT$Label, LQ(Transportion_warehouse, home_tracts))
WACTRACT$Label <- LQ(Transportion_warehouse, home_tracts))
WACTRACT$Label <- LQ(Transportion_warehouse, home_tracts)
View(WACTRACT)
LQ_MAP <- tm_shape(WACBLOCK) +tm_polygons() +tm_symbols(col="Transportation_Warehouse") + tm_borders() +tm_layout(title = "Location Quotients (LQ) of the Transporation and Warehouse Industry (Based On households)", title.position = c("RIGHT", "TOP"))
LQ_MAP <- tm_shape(WACTRACT) +tm_polygons() +tm_symbols(col="Transportation_Warehouse") + tm_borders() +tm_layout(title = "Location Quotients (LQ) of the Transporation and Warehouse Industry (Based On households)", title.position = c("RIGHT", "TOP"))
LQ_MAP
WACTRACT$Transportion_Warehouse <- LQ(Transportion_warehouse, home_tracts)
LQ_MAP <- tm_shape(WACTRACT) + tm_polygons() +tm_symbols(col="Transportation_Warehouse") + tm_borders() +tm_layout(title = "Location Quotients (LQ) of the Transporation and Warehouse Industry (Based On households)", title.position = c("RIGHT", "TOP"))
LQ_MAP
## Use the RColorBrewer package to define a colour palette.
colors <- brewer.pal(6, "Blues")
brks<-c(0.4, 0.6, 0.8, 1, 1.2, 1.4, 1.6)
colours <- brewer.pal(6, "Blues")
plot(sport, col=colours[findInterval(WACTRACT$L, brks,
all.inside=TRUE)], axes=F)
plot(sport, col=colours[findInterval(WACTRACT$Transportion_Warehouse, brks,
all.inside=TRUE)], axes=F)
colours <- brewer.pal(6, "Blues")
plot(WACTRACT, col=colours[findInterval(WACTRACT$Transportion_Warehouse, brks,
all.inside=TRUE)], axes=F)
plot(WACTRACT, col=colours[findInterval(WACTRACT$Transportion_Warehouse, brks,
all.inside=TRUE)], axes=F)
box()
## Plot map
options(sf_max.plot = 1)
brks<-c(0.4, 0.6, 0.8, 1, 1.2, 1.4, 1.6)
colours <- brewer.pal(6, "Blues")
plot(WACTRACT, col=colours[findInterval(WACTRACT$Transportion_Warehouse, brks,
all.inside=TRUE)], axes=F)
box()
## Plot map
options(sf_max.plot = 1)
brks<-c(0.4, 0.6, 0.8, 1, 1.2, 1.4, 1.6)
colours <- brewer.pal(6, "Blues")
plot(WACTRACT, col=colours[findInterval(WACTRACT$Transportion_Warehouse, brks,
all.inside=TRUE)], axes=F)
View(WACBLOCK)
SpatialPolygonsRescale(layout.north.arrow(1), offset= c(505100,164800), scale = 6000, plot.grid=F)
box()
SpatialPolygonsRescale(layout.north.arrow(1), offset= c(505100,164800), scale = 6000, plot.grid=F)
title(paste ("LQ of London Sports Participation"))
legend(x=503800, y=164800, legend=leglabs(brks), fill=colours, bty="n")
LQ_MAP <- tm_shape(WACTRACT) + tm_polygons() +tm_symbols(col="Transportation_Warehouse") + tm_borders() +tm_layout(title = "Location Quotients (LQ) of the Transporation and Warehouse Industry (Based On households)", title.position = c("RIGHT", "TOP"))
LQ_MAP
LQ_MAP <- tm_shape(WACTRACT$Transportion_Warehouse) + tm_polygons() +tm_symbols(col="Transportation_Warehouse") + tm_borders() +tm_layout(title = "Location Quotients (LQ) of the Transporation and Warehouse Industry (Based On households)", title.position = c("RIGHT", "TOP"))
LQ_MAP
tmap_mode("plot")
LQ_MAP <- tm_shape(WACTRACT$Transportion_Warehouse) + tm_polygons() +tm_symbols(col="Transportation_Warehouse") + tm_borders() +tm_layout(title = "Location Quotients (LQ) of the Transporation and Warehouse Industry (Based On households)", title.position = c("RIGHT", "TOP"))
LQ_MAP
LQ_MAP <- tm_shape(WACTRACT) + tm_polygons() +tm_symbols(col="Transportation_Warehouse") + tm_borders() +tm_layout(title = "Location Quotients (LQ) of the Transporation and Warehouse Industry (Based On households)", title.position = c("RIGHT", "TOP"))
LQ_MAP
WACTRACT <- WACTRACT %>% select(Transportion_warehouse != NA)
tmap_mode("plot")
LQ_MAP <- tm_shape(WACTRACT) + tm_polygons() +tm_symbols(col="Transportation_Warehouse") + tm_borders() +tm_layout(title = "Location Quotients (LQ) of the Transporation and Warehouse Industry (Based On households)", title.position = c("RIGHT", "TOP"))
LQ_MAP
LQ_MAP <- tm_shape(WACTRACT) + tm_polygons() + tm_symbols(col="Transportation_Warehouse") + tm_borders() +tm_layout(title = "Location Quotients (LQ) of the Transporation and Warehouse Industry (Based On households)", title.position = c("RIGHT", "TOP"))
LQ_MAP
tmap_mode(LQ_MAP)
tmap_mode("plot")
tmap_mode("plot")
LQ_MAP <- tm_shape(WACTRACT) + tm_polygons() + tm_symbols(col="Transportation_Warehouse") + tm_borders() +tm_layout(title = "Location Quotients (LQ) of the Transporation and Warehouse Industry (Based On households)", title.position = c("RIGHT", "TOP"))
LQ_MAP <- tm_shape(WACTRACT) + tm_polygons() + tm_symbols(col="Transportation_Warehouse") + tm_borders() + tm_layout(title = "Location Quotients (LQ) of the Transporation and Warehouse Industry (Based On households)", title.position = c("RIGHT", "TOP"))
LQ_MAP
LQ_MAP <- tm_shape(WACTRACT) + tm_polygons() + tm_symbols(col="Transportation_Warehouse", colorNULL = TRUE) + tm_borders() + tm_layout(title = "Location Quotients (LQ) of the Transporation and Warehouse Industry (Based On households)", title.position = c("RIGHT", "TOP"))
LQ_MAP
LQ_MAP <- tm_shape(WACTRACT) + tm_polygons() + tm_symbols(col = "Transportation_Warehouse") + tm_borders() + tm_layout(title = "Location Quotients (LQ) of the Transporation and Warehouse Industry (Based On households)", title.position = c("RIGHT", "TOP"))
LQ_MAP
LQ_MAP <- tm_shape(WACTRACT) + tm_polygons() + tm_symbols(col = "Transportation_Warehouse") + tm_borders() + tm_layout(title = "Location Quotients (LQ) of the Transporation and Warehouse Industry (Based On households)", title.position = c("RIGHT", "TOP"))
LQ_MAP <- tm_shape(WACTRACT) + tm_polygons() + tm_symbols(breaks = "Transportation_Warehouse") + tm_borders() + tm_layout(title = "Location Quotients (LQ) of the Transporation and Warehouse Industry (Based On households)", title.position = c("RIGHT", "TOP"))
LQ_MAP
LQ_MAP <- tm_shape(WACTRACT) + tm_polygons() + tm_symbols(breaks = "Transportation_Warehouse") + tm_borders() + tm_layout(title = "Location Quotients (LQ) of the Transporation and Warehouse Industry (Based On households)", title.position = c("TOP"))
LQ_MAP
LQ_MAP <- tm_shape(WACTRACT) + tm_polygons() + tm_symbols(breaks = "Transportation_Warehouse") + tm_borders() + tm_layout(title = "Location Quotients (LQ) of the Transporation and Warehouse Industry (Based On households)", title.position = c("MID", "TOP"))
LQ_MAP
LQ_MAP <- tm_shape(WACTRACT) + tm_polygons() + tm_symbols(breaks = "Transportation_Warehouse") + tm_borders() + tm_layout(title = "Location Quotients (LQ) of the Transporation and Warehouse Industry (Based On households)", title.position = c("MIDDLE", "TOP"))
LQ_MAP
LQ_MAP <- tm_shape(WACTRACT) + tm_polygons() + tm_symbols(breaks = "Transportation_Warehouse") + tm_borders() + tm_layout(title = "Location Quotients (LQ) of the Transporation and Warehouse Industry (Based On households)", title.position = c("RIGHT", "TOP"))
LQ_MAP
LQ_MAP <- tm_shape(WACTRACT) + tm_polygons() + tm_symbols(breaks = c(0.4, 0.6, 0.8, 1, 1.2, 1.4, 1.6), col = "Transportation_Warehouse") + tm_borders() + tm_layout(title = "Location Quotients (LQ) of the Transporation and Warehouse Industry (Based On households)", title.position = c("RIGHT", "TOP"))
LQ_MAP
LQ_MAP <- tm_shape(WACTRACT) + tm_polygons() + tm_dots(breaks = "Transportation_Warehouse") + tm_borders() + tm_layout(title = "Location Quotients (LQ) of the Transporation and Warehouse Industry (Based On households)", title.position = c("RIGHT", "TOP"))
LQ_MAP
LQ_MAP <- tm_shape(WACTRACT) + tm_polygons() + tm_dots(col = "Transportation_Warehouse", breaks = "Transportation_Warehouse") + tm_borders() + tm_layout(title = "Location Quotients (LQ) of the Transporation and Warehouse Industry (Based On households)", title.position = c("RIGHT", "TOP"))
LQ_MAP
LQ_MAP <- tm_shape(WACTRACT) + tm_polygons() + tm_markers(col = "Transportation_Warehouse", clustering = TRUE) + tm_borders() + tm_layout(title = "Location Quotients (LQ) of the Transporation and Warehouse Industry (Based On households)", title.position = c("RIGHT", "TOP"))
LQ_MAP
LQ_MAP <- tm_shape(WACTRACT) + tm_polygons() + tm_dots(breaks = "Transportation_Warehouse") + tm_borders() + tm_layout(title = "Location Quotients (LQ) of the Transporation and Warehouse Industry (Based On households)", title.position = c("RIGHT", "TOP"))
LQ_MAP
LQ_MAP <- tm_shape(WACTRACT) + tm_polygons() + tm_dots(breaks = "Transportation_Warehouse", size = "2") + tm_borders() + tm_layout(title = "Location Quotients (LQ) of the Transporation and Warehouse Industry (Based On households)", title.position = c("RIGHT", "TOP"))
LQ_MAP
LQ_MAP <- tm_shape(WACTRACT) + tm_polygons() + tm_dots(breaks = "Transportation_Warehouse", size = 2) + tm_borders() + tm_layout(title = "Location Quotients (LQ) of the Transporation and Warehouse Industry (Based On households)", title.position = c("RIGHT", "TOP"))
LQ_MAP
LQ_MAP <- tm_shape(WACTRACT) + tm_polygons() + tm_dots(breaks = "Transportation_Warehouse", size = 1) + tm_borders() + tm_layout(title = "Location Quotients (LQ) of the Transporation and Warehouse Industry (Based On households)", title.position = c("RIGHT", "TOP"))
LQ_MAP
library(tidyverse)
baseData=read.csv("wa_od_main_JT01_2015.csv")
ODDATA <- read.csv("od2015_Tacoma.csv")
WACT <- read.csv("wac2015_Tacoma.csv")
WACB <- read.csv("wac2015_Tacoma_Block.csv")
tacomablockshp <- st_read("tacomablocks-polygon.shp")
tacomatractshp <- st_read("pie10ct.shp")
Washingtontractshp <- st_read("cb_2017_53_tract_500k.shp")
View(WACB)
WACBLOCK$GEOID10 <- substr(WACBLOCK$GEOID10, 1, nchar(WACBLOCK$GEOID10), -4)
WACBLOCK$GEOID10 <- substr(WACBLOCK$GEOID10, 1, nchar(WACBLOCK$GEOID10), - 4)
WACBLOCK$GEOID10 <- substr(WACBLOCK$GEOID10, 1, nchar(WACBLOCK$GEOID10)-4)
WACT$GEOID10 = WACT$wt
WACBLOCK$GEOID10 <- substr(WACBLOCK$GEOID10, 1, nchar(WACBLOCK$GEOID10)-4)
###Create Map 1
# Block Shapefile with WAC
WACB$GEOID10= WACB$w_geocode
WACBLOCK <- merge(tacomablockshp, WACB, by=c("GEOID10"))
#Change label name for plot Block
WACBLOCK$Population = WACBLOCK$CE01
WACBLOCK$GEOID10 <- substr(WACBLOCK$GEOID10, 1, nchar(WACBLOCK$GEOID10)-4)
WACBLOCK$GEOID10 <- substr(WACBLOCK$GEOID10, 1:-4)
WACBLOCK$GEOID10 <- as.character(WACBLOCK$GEOID10)
WACBLOCK$GEOID10 <- substr(WACBLOCK$GEOID10, 1, nchar(WACBLOCK$GEOID10)- 4)
WACBLOCK <- merge(tacomablockshp, WACBLOCK, by=c("GEOID10"))
WACBLOCK <- merge(tacomablockshp, WACBLOCK, by=c("GEOID10"))
WACBLOCK <- st_as_sf(WACBLOCK)
WACBLOCK <- merge(tacomablockshp, WACBLOCK, by=c("GEOID10"))
WACBLOCK <- st_as_sfc(WACBLOCK)
LQ_MAP <- tm_shape(WACTRACT) + tm_polygons() + tm_dots(breaks = "Transportation_Warehouse", size = 1) + tm_borders() + tm_layout(title = "Location Quotients (LQ) of the Transporation and Warehouse Industry (Based On households)", title.position = c("RIGHT", "TOP"))
LQ_MAP
LQ_MAP <- tm_shape(WACTRACT) + tm_polygons() + tm_dots(breaks = "Transportation_Warehouse", size = .8) + tm_borders() + tm_layout(title = "Location Quotients (LQ) of the Transporation and Warehouse Industry (Based On households)", title.position = c("RIGHT", "TOP"))
LQ_MAP
#Maps out the LQ of Transportation and Warehousing Industry in Pierce County
LQ_MAP <- tm_shape(WACTRACT) + tm_polygons() + tm_dots(breaks = "Transportation_Warehouse", size = .8) + tm_borders() + tm_layout(title = "Location Quotients (LQ) of the Transporation and Warehouse Industry (Based On households)", title.position = c("RIGHT", "TOP"))
